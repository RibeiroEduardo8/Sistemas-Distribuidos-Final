# Usa a imagem oficial do Ollama com suporte a modelos de IA
FROM ollama/ollama:latest

# Instala dependências do Python
RUN apt-get update && apt-get install -y python3 python3-pip

# Define o diretório de trabalho
WORKDIR /app

# Copia os arquivos do projeto para o container
COPY main.py .
COPY requirements.txt .

# Instala as dependências do Python
RUN pip3 install --no-cache-dir -r requirements.txt

# Faz o pull do modelo phi3:mini
RUN ollama pull phi3:mini

# Expõe a porta da API
EXPOSE 8000

# Comando para rodar o servidor
CMD ["python3", "main.py"]
